# Good Measure Giving Context

This project is "Good Measure Giving," an evidence-driven charity evaluation platform for the Muslim community. It evaluates charities based on **Impact**, **Confidence**, and **Zakat Alignment**.

## üèóÔ∏è Project Architecture

The project is a monorepo with two main components:

### 1. Data Pipeline (`data-pipeline/`)
A Python-based ETL pipeline that collects, reconciles, and evaluates charity data.
*   **Tech:** Python 3.13+, DoltDB (MySQL-compatible, version-controlled), `uv`, `litellm`.
*   **Core Logic:**
    *   **Collection:** Scrapes data from Charity Navigator, ProPublica, Candid, and websites.
    *   **Evaluation:** Uses LLMs (Gemini 3.0 Flash) to generate Impact/Confidence scores and Zakat assessments.
    *   **Reconciliation:** Merges multi-source data into a canonical record.
    *   **Export:** Generates JSON files for the frontend.

### 2. Website (`website/`)
The public-facing frontend.
*   **Tech:** React 19, TypeScript, Vite, Tailwind CSS.
*   **Data Source:** Consumes JSON data generated by the data pipeline (stored in `website/data/`).
*   **Auth:** Supabase Auth for user authentication.

---

## üõ†Ô∏è Development & Usage

**Dependency Management:**
*   **Python:** Uses `uv`. Always use `uv run <script>` or `uv sync`.
*   **Frontend:** Uses `npm`.

### Data Pipeline Operations

**Main Entry Point:**
```bash
# Interactive wizard (recommended)
uv run z

# Run individual phases
uv run python crawl.py --charities pilot_charities.txt
uv run python extract.py --charities pilot_charities.txt
uv run python synthesize.py --charities pilot_charities.txt
uv run python baseline.py --charities pilot_charities.txt
uv run python export.py
```

### Website

```bash
cd website
npm run dev
```
*   Local: `http://localhost:5173`

---

## üìÇ Key Directories & Files

*   **`data-pipeline/`**
    *   `crawl.py`, `extract.py`, `synthesize.py`, `baseline.py`, `export.py`: Pipeline phases.
    *   `src/db/`: DoltDB repositories (CharityRepository, RawDataRepository, etc.).
    *   `src/collectors/`: Data collectors for ProPublica, Charity Navigator, Candid, web scraping.
    *   `pilot_charities.txt`: List of charities used for testing/benchmarking.
*   **`website/`**
    *   `src/`: React source code.
    *   `data/`: JSON data files generated by the pipeline.

## üí° Conventions

*   **Database:** DoltDB (MySQL-compatible with Git-like version control) is the single source of truth for charity data. Supabase is used only for user authentication.
*   **LLMs:** Gemini 3.0 Flash is the primary model for evaluations.
*   **Testing:** Always test incrementally: 1 ‚Üí 5 ‚Üí 10 ‚Üí all charities.
